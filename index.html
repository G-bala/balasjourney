<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bala Viswanth G â€” RF Engineer</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%230a0f1e'/%3E%3Crect x='1' y='1' width='62' height='62' rx='11' fill='none' stroke='%2360a5fa' stroke-width='1.5' opacity='0.6'/%3E%3Ctext x='50%25' y='54%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black, sans-serif' font-weight='900' font-size='22' fill='%2360a5fa' letter-spacing='-1'%3EBVG%3C/text%3E%3Ctext x='50%25' y='54%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial Black, sans-serif' font-weight='900' font-size='22' fill='none' stroke='%2322d3ee' stroke-width='0.4' letter-spacing='-1'%3EBVG%3C/text%3E%3C/svg%3E">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Inter:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0a0f1e;
  --surface:  #111827;
  --surface2: #1a2235;
  --border:   rgba(99,179,237,0.12);
  --border2:  rgba(99,179,237,0.22);
  --text:     #f0f6ff;
  --text2:    #cbd5e1;
  --muted:    #64748b;
  --accent:   #3b82f6;
  --accent2:  #60a5fa;
  --cyan:     #22d3ee;
  --orange:   #f97316;
  --green:    #22c55e;
  --yellow:   #eab308;
  --pink:     #ec4899;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text2);
  font-family: 'Inter', sans-serif;
  font-size: 15px;
  line-height: 1.75;
  overflow-x: hidden;
  cursor: none;
  -webkit-font-smoothing: antialiased;
}

/* Subtle grid background */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(rgba(59,130,246,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59,130,246,0.03) 1px, transparent 1px);
  background-size: 48px 48px;
  pointer-events: none;
  z-index: 0;
}

/* Gradient orbs */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 600px 500px at 10% 20%, rgba(59,130,246,0.07) 0%, transparent 70%),
    radial-gradient(ellipse 500px 400px at 90% 80%, rgba(34,211,238,0.05) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

#buzz-canvas {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  z-index: 9996;
}

/* CURSOR */
.cursor {
  width: 8px; height: 8px;
  background: var(--accent2);
  border-radius: 50%;
  position: fixed;
  top: 0; left: 0;
  pointer-events: none;
  z-index: 9999;
  box-shadow: 0 0 12px rgba(96,165,250,0.6);
  transition: transform 0.1s ease;
}
.cursor-ring {
  width: 32px; height: 32px;
  border: 1.5px solid rgba(96,165,250,0.45);
  border-radius: 50%;
  position: fixed;
  top: 0; left: 0;
  pointer-events: none;
  z-index: 9998;
  transition: width 0.2s, height 0.2s, opacity 0.2s;
}

/* NAV */
nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 56px;
  background: rgba(10,15,30,0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
}
.nav-logo {
  font-family: 'Orbitron', monospace;
  font-weight: 900;
  font-size: 15px;
  letter-spacing: 0.16em;
  color: var(--accent2);
  text-decoration: none;
}
.nav-links { display: flex; gap: 36px; list-style: none; }
.nav-links a {
  color: var(--muted);
  text-decoration: none;
  font-size: 13px;
  font-weight: 500;
  letter-spacing: 0.02em;
  transition: color 0.2s;
  position: relative;
}
.nav-links a::after {
  content: '';
  position: absolute;
  bottom: -4px; left: 0;
  width: 0; height: 2px;
  background: var(--accent);
  border-radius: 2px;
  transition: width 0.3s;
}
.nav-links a:hover { color: var(--text); }
.nav-links a:hover::after { width: 100%; }
.nav-status {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--green);
  font-weight: 500;
}
.status-dot {
  width: 7px; height: 7px;
  background: var(--green);
  border-radius: 50%;
  animation: blink 2s ease-in-out infinite;
  box-shadow: 0 0 6px var(--green);
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

/* HERO */
.hero {
  min-height: 100vh;
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  align-items: center;
  padding: 110px 56px 60px;
  position: relative;
  z-index: 2;
  gap: 72px;
  max-width: 1320px;
  margin: 0 auto;
}
.hero-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 6px 14px;
  border: 1px solid rgba(59,130,246,0.3);
  border-radius: 100px;
  background: rgba(59,130,246,0.08);
  font-size: 12px;
  font-weight: 500;
  letter-spacing: 0.04em;
  color: var(--accent2);
  margin-bottom: 28px;
  opacity: 0;
  animation: fadeSlide 0.7s ease forwards 0.3s;
}
.hero-eyebrow::before {
  content: '';
  width: 6px; height: 6px;
  background: var(--accent2);
  border-radius: 50%;
  box-shadow: 0 0 8px var(--accent2);
}
.hero-name {
  font-family: 'Orbitron', monospace;
  font-size: clamp(32px, 4vw, 58px);
  font-weight: 900;
  line-height: 1.08;
  letter-spacing: -1px;
  color: var(--text);
  margin-bottom: 10px;
  opacity: 0;
  animation: fadeSlide 0.7s ease forwards 0.5s;
}
.hero-subtitle {
  font-family: 'Inter', sans-serif;
  font-size: clamp(13px, 1.3vw, 16px);
  font-weight: 500;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  background: linear-gradient(90deg, var(--accent2), var(--cyan));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 28px;
  opacity: 0;
  animation: fadeSlide 0.7s ease forwards 0.7s;
}
.hero-desc {
  color: var(--text2);
  line-height: 1.85;
  max-width: 480px;
  margin-bottom: 36px;
  font-size: 15px;
  opacity: 0;
  animation: fadeSlide 0.7s ease forwards 0.85s;
}
.hero-desc strong { color: var(--text); font-weight: 600; }

.pub-badge {
  display: inline-flex; align-items: center; gap: 10px;
  padding: 10px 16px; border: 1px solid rgba(234,179,8,0.2);
  border-radius: 8px; background: rgba(234,179,8,0.05);
  margin-bottom: 36px; font-size: 12px; color: var(--yellow);
  line-height: 1.5; max-width: 480px; opacity: 0;
  animation: fadeSlide 0.7s ease forwards 1s;
  text-decoration: none; transition: background 0.2s, border-color 0.2s;
}
.pub-badge:hover { background: rgba(234,179,8,0.1); border-color: rgba(234,179,8,0.4); }
.pub-icon { font-size: 16px; flex-shrink: 0; }
.pub-label { font-size: 10px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--muted); display: block; }

.hero-actions {
  display: flex; gap: 14px; flex-wrap: wrap;
  opacity: 0; animation: fadeSlide 0.7s ease forwards 1.05s;
}
.btn {
  padding: 12px 26px;
  font-family: 'Inter', sans-serif;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.02em;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.22s;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  border: none;
}
.btn-cyan {
  background: var(--accent);
  color: #fff;
  box-shadow: 0 4px 24px rgba(59,130,246,0.3);
}
.btn-cyan:hover { background: var(--accent2); box-shadow: 0 6px 32px rgba(59,130,246,0.4); transform: translateY(-1px); }
.btn-outline {
  background: transparent;
  color: var(--text2);
  border: 1.5px solid var(--border2);
}
.btn-outline:hover { border-color: var(--accent); color: var(--accent2); background: rgba(59,130,246,0.06); }

/* Hero right */
.hero-right { opacity: 0; animation: fadeSlide 0.9s ease forwards 1.2s; }
.spectrum-display {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 24px;
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 48px rgba(0,0,0,0.3);
}
.spectrum-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.spectrum-title {
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.12em;
  color: var(--accent2);
  text-transform: uppercase;
  font-family: 'IBM Plex Mono', monospace;
}
.spectrum-live {
  font-size: 11px;
  font-family: 'IBM Plex Mono', monospace;
  color: var(--green);
  display: flex;
  align-items: center;
  gap: 6px;
}
.spectrum-live::before {
  content: '';
  width: 6px; height: 6px;
  background: var(--green);
  border-radius: 50%;
  animation: blink 1.5s ease-in-out infinite;
  box-shadow: 0 0 6px var(--green);
}
.spectrum-display-inner {
  display: block; width: 100%; height: 200px; position: relative;
}
#specCanvas { width: 100%; height: 100%; display: block; border-radius: 6px; }
.freq-labels {
  display: flex; justify-content: space-between;
  margin-top: 10px; font-size: 10px;
  color: var(--muted); font-family: 'IBM Plex Mono', monospace;
}

.readout-label { font-size: 9px; letter-spacing: 0.12em; text-transform: uppercase; color: var(--muted); margin-bottom: 4px; font-family: 'IBM Plex Mono', monospace; }
.readout-value { font-family: 'Orbitron', monospace; font-size: 14px; font-weight: 700; }
.rv-cyan   { color: var(--cyan); }
.rv-orange { color: var(--orange); }
.rv-green  { color: var(--green); }
.rv-yellow { color: var(--yellow); }

/* Experience strip */
.exp-strip {
  position: relative; z-index: 2;
  max-width: 1320px; margin: 0 auto;
  padding: 0 56px 80px;
  display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
}
.exp-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 32px 36px;
  position: relative; overflow: hidden;
  transition: border-color 0.3s, transform 0.3s, box-shadow 0.3s;
}
.exp-card:hover { border-color: var(--border2); transform: translateY(-3px); box-shadow: 0 12px 48px rgba(0,0,0,0.25); }
.exp-card::before {
  content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; border-radius: 3px 0 0 3px;
}
.exp-card.role-current::before { background: linear-gradient(180deg, var(--accent), var(--cyan)); }
.exp-card.role-past::before    { background: linear-gradient(180deg, var(--orange), var(--pink)); }
.exp-period {
  font-size: 11px; font-weight: 600; letter-spacing: 0.06em;
  text-transform: uppercase; margin-bottom: 10px;
  display: flex; align-items: center; gap: 8px;
  font-family: 'IBM Plex Mono', monospace;
}
.role-current .exp-period { color: var(--accent2); }
.role-past .exp-period    { color: var(--orange); }
.exp-role {
  font-family: 'Orbitron', monospace;
  font-size: 15px; font-weight: 700;
  color: var(--text); margin-bottom: 4px;
}
.exp-org { font-size: 13px; color: var(--muted); margin-bottom: 18px; font-weight: 400; }
.exp-bullets { list-style: none; display: flex; flex-direction: column; gap: 10px; }
.exp-bullets li {
  color: var(--text2); font-size: 13px; line-height: 1.7;
  padding-left: 18px; position: relative;
}
.exp-bullets li::before { content: 'â€º'; position: absolute; left: 0; font-size: 16px; line-height: 1.4; }
.role-current .exp-bullets li::before { color: var(--accent2); }
.role-past .exp-bullets li::before    { color: var(--orange); }

/* SECTION */
.section-wrap {
  position: relative; z-index: 2;
  padding: 88px 56px; max-width: 1320px; margin: 0 auto;
}
.section-label {
  font-size: 11px; font-weight: 600; letter-spacing: 0.12em;
  text-transform: uppercase; color: var(--accent);
  margin-bottom: 12px; display: flex; align-items: center; gap: 12px;
  font-family: 'IBM Plex Mono', monospace;
}
.section-label::before {
  content: ''; display: inline-block;
  width: 28px; height: 2px;
  background: var(--accent); border-radius: 2px;
}
.section-title {
  font-family: 'Orbitron', monospace;
  font-size: clamp(24px, 3vw, 40px);
  font-weight: 900; letter-spacing: -0.5px;
  line-height: 1.12; color: var(--text); margin-bottom: 52px;
}
.section-title span { color: var(--accent2); }

/* PROJECTS */
.projects-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 20px; }
.project-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px; padding: 36px;
  position: relative; overflow: hidden;
  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);
  display: flex; flex-direction: column;
}
.project-card::before {
  content: ''; position: absolute; inset: 0;
  opacity: 0; transition: opacity 0.3s; pointer-events: none;
}
.project-card:hover { transform: translateY(-5px); box-shadow: 0 20px 60px rgba(0,0,0,0.35); border-color: var(--border2); }
.project-card:hover::before { opacity: 1; }

.card-cyan::before   { background: linear-gradient(135deg, rgba(34,211,238,0.05), transparent 60%); }
.card-orange::before { background: linear-gradient(135deg, rgba(249,115,22,0.05), transparent 60%); }
.card-green::before  { background: linear-gradient(135deg, rgba(34,197,94,0.05), transparent 60%); }

.card-cyan:hover   { border-color: rgba(34,211,238,0.3); }
.card-orange:hover { border-color: rgba(249,115,22,0.3); }
.card-green:hover  { border-color: rgba(34,197,94,0.3); }

.card-span-7 { grid-column: span 7; }
.card-span-5 { grid-column: span 5; }
.card-span-6 { grid-column: span 6; }

.card-corner {
  position: absolute; top: 0; right: 0;
  width: 60px; height: 60px; border-bottom-left-radius: 60px;
}
.card-cyan .card-corner   { background: rgba(34,211,238,0.06); }
.card-orange .card-corner { background: rgba(249,115,22,0.06); }
.card-green .card-corner  { background: rgba(34,197,94,0.06); }

.project-num {
  position: absolute; top: 32px; right: 36px;
  font-family: 'Orbitron', monospace; font-size: 11px;
  color: var(--muted); opacity: 0.3;
}
.project-freq {
  font-size: 10px; font-weight: 600; letter-spacing: 0.1em;
  text-transform: uppercase; margin-bottom: 14px;
  font-family: 'IBM Plex Mono', monospace;
}
.card-cyan .project-freq   { color: var(--cyan); }
.card-orange .project-freq { color: var(--orange); }
.card-green .project-freq  { color: var(--green); }

.project-title {
  font-family: 'Orbitron', monospace;
  font-size: clamp(14px, 1.4vw, 18px);
  font-weight: 700; color: var(--text);
  margin-bottom: 12px; line-height: 1.25;
}
.project-desc {
  color: var(--text2); font-size: 13px;
  line-height: 1.8; margin-bottom: 22px; flex: 1;
}
.project-highlights {
  list-style: none; display: flex;
  flex-direction: column; gap: 8px; margin-bottom: 22px;
}
.project-highlights li {
  font-size: 13px; color: var(--text2);
  padding-left: 16px; position: relative; line-height: 1.65;
}
.project-highlights li::before { content: 'â€º'; position: absolute; left: 0; font-size: 15px; line-height: 1.4; }
.card-cyan .project-highlights li::before   { color: var(--cyan); }
.card-orange .project-highlights li::before { color: var(--orange); }
.card-green .project-highlights li::before  { color: var(--green); }

.project-tags {
  display: flex; flex-wrap: wrap; gap: 7px;
  margin-top: auto; padding-top: 18px; border-top: 1px solid var(--border);
}
.tag {
  padding: 4px 11px; border-radius: 100px;
  font-size: 11px; font-weight: 500; letter-spacing: 0.02em;
}
.card-cyan .tag   { background: rgba(34,211,238,0.08);  color: var(--cyan);   border: 1px solid rgba(34,211,238,0.15); }
.card-orange .tag { background: rgba(249,115,22,0.08);  color: var(--orange); border: 1px solid rgba(249,115,22,0.15); }
.card-green .tag  { background: rgba(34,197,94,0.08);   color: var(--green);  border: 1px solid rgba(34,197,94,0.15); }

/* Patent badge */
.patent-badge {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 6px 14px; border: 1px solid rgba(234,179,8,0.25);
  border-radius: 100px; background: rgba(234,179,8,0.06);
  font-size: 11px; font-weight: 500; color: var(--yellow);
  margin-bottom: 14px; letter-spacing: 0.02em;
}

/* SKILLS */
.skills-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 18px; }
.skill-group {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px; padding: 28px 24px;
  transition: border-color 0.25s, transform 0.25s, box-shadow 0.25s;
}
.skill-group:hover { transform: translateY(-3px); box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
.skill-group:nth-child(1) { border-top: 2px solid var(--accent2); }
.skill-group:nth-child(2) { border-top: 2px solid var(--orange); }
.skill-group:nth-child(3) { border-top: 2px solid var(--green); }
.skill-group:nth-child(4) { border-top: 2px solid var(--cyan); }
.skill-group-title {
  font-family: 'Orbitron', monospace;
  font-size: 11px; font-weight: 700;
  margin-bottom: 18px; letter-spacing: 0.04em;
}
.skill-group:nth-child(1) .skill-group-title { color: var(--accent2); }
.skill-group:nth-child(2) .skill-group-title { color: var(--orange); }
.skill-group:nth-child(3) .skill-group-title { color: var(--green); }
.skill-group:nth-child(4) .skill-group-title { color: var(--cyan); }
.skill-list { list-style: none; display: flex; flex-direction: column; gap: 12px; }
.skill-list li {
  font-size: 13px; color: var(--text2);
  display: flex; align-items: center; gap: 10px; font-weight: 400;
}
.skill-list li::before {
  content: ''; width: 5px; height: 5px;
  border-radius: 50%; flex-shrink: 0;
}
.skill-group:nth-child(1) .skill-list li::before { background: var(--accent2); }
.skill-group:nth-child(2) .skill-list li::before { background: var(--orange); }
.skill-group:nth-child(3) .skill-list li::before { background: var(--green); }
.skill-group:nth-child(4) .skill-list li::before { background: var(--cyan); }

/* CONTACT */
.contact-box {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 20px; padding: 60px 56px;
  display: grid; grid-template-columns: 1fr auto;
  align-items: center; gap: 52px;
  background-image: linear-gradient(135deg, rgba(59,130,246,0.05) 0%, transparent 50%, rgba(34,211,238,0.04) 100%);
  box-shadow: 0 8px 48px rgba(0,0,0,0.2);
}
.contact-title {
  font-family: 'Orbitron', monospace;
  font-size: clamp(20px, 2.5vw, 32px);
  font-weight: 900; color: var(--text);
  margin-bottom: 14px; letter-spacing: -0.3px;
}
.contact-desc { color: var(--text2); max-width: 480px; line-height: 1.85; font-size: 14px; }
.contact-links { display: flex; flex-direction: column; gap: 12px; }

/* Divider */
.divider {
  position: relative; z-index: 2;
  max-width: 1320px; margin: 0 auto; padding: 0 56px;
}
.divider-line { width: 100%; height: 1px; background: var(--border); }

/* Footer */
footer {
  position: relative; z-index: 2;
  border-top: 1px solid var(--border);
  padding: 32px 56px; display: flex;
  justify-content: space-between; align-items: center;
  color: var(--muted); font-size: 13px;
}
.footer-logo {
  font-family: 'Orbitron', monospace;
  font-weight: 700; color: var(--accent2);
  font-size: 14px; letter-spacing: 0.08em;
}
.footer-links { display: flex; gap: 24px; }
.footer-links a { color: var(--muted); text-decoration: none; transition: color 0.2s; font-size: 13px; }
.footer-links a:hover { color: var(--accent2); }

@keyframes fadeSlide {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

@media (max-width: 960px) {
  nav { padding: 16px 24px; }
  .nav-links { display: none; }
  .hero { grid-template-columns: 1fr; padding: 100px 24px 60px; gap: 52px; }
  .exp-strip { grid-template-columns: 1fr; padding: 0 24px 60px; }
  .section-wrap { padding: 60px 24px; }
  .card-span-7, .card-span-5, .card-span-6 { grid-column: span 12; }
  .skills-grid { grid-template-columns: repeat(2, 1fr); }
  .contact-box { grid-template-columns: 1fr; gap: 32px; padding: 40px 28px; }
  footer { flex-direction: column; gap: 14px; text-align: center; padding: 28px 24px; }
}
@media (max-width: 600px) {
  .skills-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>
<canvas id="buzz-canvas"></canvas>


<nav>
  <a href="#" class="nav-logo">BVG<span style="color:var(--orange)">.</span></a>
  <ul class="nav-links">
    <li><a href="#experience">Experience</a></li>
    <li><a href="#projects">Projects</a></li>
    <li><a href="#skills">Skills</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
  <div class="nav-status">
    <div class="status-dot"></div>
    Open to opportunities
  </div>
</nav>

<!-- HERO -->
<section style="position:relative;z-index:2;">
<div class="hero">
  <div class="hero-left">
    <div class="hero-eyebrow">RF &amp; Embedded Systems Engineer</div>
    <h1 class="hero-name">Bala Viswanth G</h1>
    <p class="hero-subtitle">Signal Processing Â· Radar Â· RF-SoC</p>
    <p class="hero-desc">
      I design <strong>Radar systems and embedded signal processing</strong> â€” from SDR-based ionospheric radar and MIMO antenna arrays to ML-based intercept receivers. Turning complex electromagnetic problems into real, deployable systems.
    </p>
    <div class="hero-actions">
      <a href="#projects" class="btn btn-cyan">View Projects â†“</a>
    </div>
  </div>
  <div class="hero-right">
    <div class="spectrum-display">
      <div class="spectrum-header">
        <span class="spectrum-title">Spectrum Analyzer</span>
        <div style="display:flex;align-items:center;gap:10px;">
          <button id="micBtn" style="
            font-family:'IBM Plex Mono',monospace;
            font-size:9px;letter-spacing:0.12em;text-transform:uppercase;
            background:rgba(0,220,255,0.08);border:1px solid rgba(0,220,255,0.3);
            color:var(--cyan);padding:4px 10px;border-radius:3px;cursor:pointer;
            transition:all 0.2s;display:flex;align-items:center;gap:6px;">
            ðŸŽ™ MIC OFF
          </button>
          <span class="spectrum-live" id="liveLabel">Simulated</span>
        </div>
      </div>
      <div class="spectrum-display-inner">
        <canvas id="specCanvas"></canvas>
      </div>
      <div class="freq-labels">
        <span>85 Hz</span>
        <span>118 Hz</span>
        <span>170 Hz</span>
        <span>213 Hz</span>
        <span>255 Hz</span>
      </div>
    </div>
  </div>
</div>
</section>

<!-- EXPERIENCE -->
<div class="exp-strip" id="experience">
  <div class="exp-card role-current">
    <div class="exp-period">Sep 2024 â€“ Present Â· Current</div>
    <div class="exp-role">Project Associate</div>
    <div class="exp-org">Quartodonda Technologies Pvt. Ltd Â· Thanjavur, India</div>
    <ul class="exp-bullets">
      <li>Optimized signal processing algorithms for real-time execution on RF-SoC platforms.</li>
      <li>Supervised a team of interns and provided technical mentorship.</li>
      <li>Collaborated with domain experts to evaluate, refine, and mature new project concepts.</li>
    </ul>
  </div>
  <div class="exp-card role-past">
    <div class="exp-period">Jan 2024 â€“ Jul 2024 Â· Internship</div>
    <div class="exp-role">Project Intern</div>
    <div class="exp-org">National Institute of Geophysics &amp; Volcanology Â· Rome, Italy</div>
    <ul class="exp-bullets">
      <li>Developed and validated the Advanced Software Programmable Ionosonde (AISP) for ionospheric research.</li>
      <li>Presented the project at the International Reference Ionosphere 2024 Workshop, Kenya.</li>
    </ul>
  </div>
</div>

<div class="divider"><div class="divider-line"></div></div>

<!-- PROJECTS -->
<div class="section-wrap" id="projects">
  <div class="section-label">Selected work</div>
  <h2 class="section-title">Projects &amp; <span>Research</span></h2>

  <div class="projects-grid">

    <!-- Project 1 â€” ML Intercept Receiver -->
    <a href="https://www.balasjourney.in/ml-intercept-receiver.html" target="_blank" rel="noopener noreferrer" style="text-decoration:none;display:contents;">
    <div class="project-card card-cyan card-span-7" style="cursor:pointer;">
      <div class="card-corner"></div>
      <div class="project-freq">â–² RF-SoC Â· Xilinx ZCU208 Â· ML</div>
      <div class="project-num">01</div>
      <h3 class="project-title">ML-Based Intercept Receiver <span style="font-size:12px;opacity:0.6;">â†—</span></h3>
      <p class="project-desc">Design and development of a machine-learning-based intercept receiver running on the Xilinx ZCU208 RF-SoC platform, achieving a dramatic reduction in processing latency through hardware-software co-optimization.</p>
      <ul class="project-highlights">
        <li>Reduced end-to-end processing time from 4 minutes to <strong style="color:var(--cyan)">14 seconds</strong> using multicore processing and SIMD.</li>
        <li>Optimized algorithms on Xilinx ZCU208 using Vivado, Vitis, and High-Level Synthesis (HLS) tools.</li>
      </ul>
      <div class="project-tags">
        <span class="tag">Xilinx ZCU208</span>
        <span class="tag">Vivado</span>
        <span class="tag">Vitis HLS</span>
        <span class="tag">SIMD</span>
        <span class="tag">Multicore Processing</span>
        <span class="tag">Machine Learning</span>
      </div>
    </div>
    </a>

    <!-- Project 2 â€” AISP -->
    <div class="project-card card-orange card-span-5">
      <div class="card-corner"></div>
      <div class="project-freq">â–² SDR Â· Ionospheric Radar</div>
      <div class="project-num">02</div>
      <h3 class="project-title">Advanced Software Programmable Ionosonde (AISP)</h3>
      <p class="project-desc">SDR-based ionospheric radar using complementary waveforms for ionospheric research, developed during internship at INGV Rome. Presented at IRI 2024 Workshop, Kenya.</p>
      <ul class="project-highlights">
        <li>Developed signal processing algorithm for ionosonde plots and improved signal visualization.</li>
        <li>Co-authored a research paper published in <em>Advances in Space Research</em>.</li>
      </ul>
      <a href="https://doi.org/10.1016/j.asr.2025.04.072" target="_blank" style="display:inline-flex;align-items:center;gap:6px;font-size:10px;color:var(--orange);text-decoration:none;margin-bottom:16px;letter-spacing:0.05em;">
        ðŸ“„ Published Paper Â· doi.org/10.1016/j.asr.2025.04.072 â†—
      </a>
      <div class="project-tags">
        <span class="tag">SDR</span>
        <span class="tag">MATLAB</span>
        <span class="tag">Radar</span>
        <span class="tag">Signal Processing</span>
        <span class="tag">Ionosphere</span>
      </div>
    </div>

    <!-- Project 3 â€” Red Palm Weevil Sensor -->
    <div class="project-card card-green card-span-6">
      <div class="card-corner"></div>
      <div class="project-freq">â–² Metamaterial Â· Microwave Sensor</div>
      <div class="project-num">03</div>
      <h3 class="project-title">Non-Invasive Red Palm Weevil Detection Sensor</h3>
      <p class="project-desc">Metamaterial-inspired microwave sensor for non-invasive detection of the Red Palm Weevil â€” a destructive agricultural pest â€” using RF resonance signatures. Designed entirely in CST Studio Suite.</p>
      <ul class="project-highlights">
        <li>Developed meta-structure sensor topology sensitive to biological material changes within palm trunks.</li>
        <li>Designed and simulated using CST microwave simulation software.</li>
      </ul>
      <div class="patent-badge">Patent Â· Application No. 202341054720</div>
      <div class="project-tags">
        <span class="tag">CST Studio</span>
        <span class="tag">Metamaterial</span>
        <span class="tag">Sensor Design</span>
        <span class="tag">Microwave</span>
        <span class="tag">Patent</span>
      </div>
    </div>

    <!-- Filler â€” Education card -->
    <div class="project-card card-cyan card-span-6" style="justify-content:center;">
      <div class="card-corner"></div>
      <div class="project-freq">â–² Education</div>
      <h3 class="project-title" style="margin-bottom:20px;">B.Tech â€” Electronics &amp; Communication</h3>
      <p class="project-desc">SASTRA Deemed University Â· Thanjavur, India<br>First Class Honours</p>
      <div style="margin-top:24px;padding-top:20px;border-top:1px solid var(--border);">
        <div style="font-size:10px;color:var(--muted);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:12px;">Highlights</div>
        <ul style="list-style:none;display:flex;flex-direction:column;gap:8px;">
          <li style="font-size:12px;color:var(--muted);padding-left:14px;position:relative;"><span style="position:absolute;left:0;color:var(--cyan);">â€º</span> Research published in international journal</li>
          <li style="font-size:12px;color:var(--muted);padding-left:14px;position:relative;"><span style="position:absolute;left:0;color:var(--cyan);">â€º</span> International internship at INGV Rome, Italy</li>
          <li style="font-size:12px;color:var(--muted);padding-left:14px;position:relative;"><span style="position:absolute;left:0;color:var(--cyan);">â€º</span> Acquired patent for sensor design</li>
        </ul>
      </div>
    </div>

  </div>
</div>

<div class="divider"><div class="divider-line"></div></div>

<!-- SKILLS -->
<div class="section-wrap" id="skills">
  <div class="section-label">Capabilities</div>
  <h2 class="section-title">Skills &amp; <span>Tools</span></h2>
  <div class="skills-grid">
    <div class="skill-group">
      <div class="skill-group-title">RF &amp; Signal</div>
      <ul class="skill-list">
        <li>Digital Signal Processing</li>
        <li>Radar System Design</li>
        <li>Embedded Coding</li>
        <li>RF Front-End Design</li>
      </ul>
    </div>
    <div class="skill-group">
      <div class="skill-group-title">Software &amp; EDA</div>
      <ul class="skill-list">
        <li>MATLAB</li>
        <li>Vivado</li>
        <li>Vitis / Vitis HLS</li>
        <li>CST Studio Suite</li>
      </ul>
    </div>
    <div class="skill-group">
      <div class="skill-group-title">Hardware &amp; Instruments</div>
      <ul class="skill-list">
        <li>Oscilloscope</li>
        <li>UXG Signal Generator</li>
        <li>Vector Network Analyzer</li>
        <li>Real-Time Spectrum Analyzer</li>
      </ul>
    </div>
    <div class="skill-group">
      <div class="skill-group-title">Other</div>
      <ul class="skill-list">
        <li>Multi-Signal Generator Tool</li>
        <li>Research &amp; Publication</li>
        <li>Team Mentorship</li>
      </ul>
    </div>
  </div>
</div>

<div class="divider"><div class="divider-line"></div></div>

<!-- CONTACT -->
<div class="section-wrap" id="contact">
  <div class="contact-box">
    <div>
      <div class="section-label" style="margin-bottom:12px;">Get in touch</div>
      <h2 class="contact-title">Let's work on something extraordinary.</h2>
      <p class="contact-desc">Whether it's an RF system design challenge, embedded signal processing, or research collaboration â€” I'm always interested in hearing about new projects.</p>
    </div>
    <div class="contact-links">
      <a href="/cdn-cgi/l/email-protection#53343f7d253a2024323d273b13343e323a3f7d303c3e" class="btn btn-cyan">Email me â†—</a>
      <a href="https://www.linkedin.com/in/balaviswanth" target="_blank" class="btn btn-outline">LinkedIn â†—</a>
      <a href="https://wa.me/919952866101" target="_blank" class="btn btn-outline">WhatsApp â†—</a>
    </div>
  </div>
</div>

<footer>
  <span class="footer-logo">BVG.</span>
  <span>Â© 2026 Bala Viswanth G â€” RF &amp; Embedded Systems Engineer</span>
  <div class="footer-links">
    <a href="/cdn-cgi/l/email-protection#88efe4a6fee1fbffe9e6fce0c8efe5e9e1e4a6ebe7e5">Email</a>
    <a href="https://www.linkedin.com/in/balaviswanth" target="_blank">LinkedIn</a>
    <a href="#home">Top â†‘</a>
  </div>
</footer>

<script>
// â”€â”€ CUSTOM CURSOR â”€â”€
const cursorDot = document.getElementById('cursor');
const cursorRing = document.getElementById('cursorRing');
let mx = 0, my = 0, rx = 0, ry = 0;

document.addEventListener('mousemove', e => {
  mx = e.clientX; my = e.clientY;
  cursorDot.style.transform = `translate(${mx - 5}px, ${my - 5}px)`;
});

function animateRing() {
  rx += (mx - rx - 19) * 0.1;
  ry += (my - ry - 19) * 0.1;
  cursorRing.style.transform = `translate(${rx}px, ${ry}px)`;
  requestAnimationFrame(animateRing);
}
animateRing();

document.querySelectorAll('a, button, .project-card, .exp-card, .skill-group').forEach(el => {
  el.addEventListener('mouseenter', () => {
    cursorRing.style.width = '56px';
    cursorRing.style.height = '56px';
    cursorRing.style.borderColor = 'rgba(96,165,250,0.6)';
    cursorRing.style.opacity = '0.8';
    cursorDot.style.background = '#60a5fa';
    cursorDot.style.boxShadow = '0 0 12px rgba(96,165,250,0.7)';
  });
  el.addEventListener('mouseleave', () => {
    cursorRing.style.width = '32px';
    cursorRing.style.height = '32px';
    cursorRing.style.borderColor = 'rgba(96,165,250,0.45)';
    cursorRing.style.opacity = '1';
    cursorDot.style.background = '#60a5fa';
    cursorDot.style.boxShadow = '0 0 12px rgba(96,165,250,0.6)';
  });
});

// â”€â”€ RF WAVE RINGS from cursor â”€â”€
const buzzCanvas = document.getElementById('buzz-canvas');
const bctx = buzzCanvas.getContext('2d');
let BW, BH;

function resizeBuzz() {
  BW = buzzCanvas.width = window.innerWidth;
  BH = buzzCanvas.height = window.innerHeight;
}
resizeBuzz();
window.addEventListener('resize', resizeBuzz);

// RF wave ring colors â€” cyan primary, with occasional orange/green harmonics
const rfColors = ['#60a5fa', '#60a5fa', '#22d3ee', '#60a5fa', '#93c5fd'];

class RFRing {
  constructor(x, y, fast) {
    this.x = x;
    this.y = y;
    this.r = 4;
    this.maxR = fast ? 80 + Math.random() * 60 : 40 + Math.random() * 40;
    this.speed = fast ? 2.2 + Math.random() * 1.5 : 1.2 + Math.random() * 0.8;
    this.life = 1;
    this.color = rfColors[Math.floor(Math.random() * rfColors.length)];
    this.lineWidth = fast ? 1.5 : 1;
    // Slight ellipse to mimic EM wave propagation
    this.scaleY = 0.55 + Math.random() * 0.3;
  }
  update() {
    this.r += this.speed;
    this.life = Math.max(0, 1 - this.r / this.maxR);
  }
  draw(ctx) {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.scale(1, this.scaleY);
    ctx.beginPath();
    ctx.arc(0, 0, this.r, 0, Math.PI * 2);
    ctx.strokeStyle = this.color;
    ctx.globalAlpha = this.life * 0.7;
    ctx.lineWidth = this.lineWidth;
    ctx.shadowColor = this.color;
    ctx.shadowBlur = 10;
    ctx.stroke();
    ctx.restore();
  }
  get dead() { return this.life <= 0; }
}

// Sine wave trail that follows the cursor path
const trail = [];
const MAX_TRAIL = 32;

// Periodic pulse â€” emit rings at regular intervals like a transmitter beacon
let pulseTimer = 0;
const PULSE_INTERVAL = 22; // frames between auto-pulses

const rings = [];
let lastMx2 = 0, lastMy2 = 0;

document.addEventListener('mousemove', e => {
  const dx = e.clientX - lastMx2, dy = e.clientY - lastMy2;
  const vel = Math.sqrt(dx * dx + dy * dy);
  lastMx2 = e.clientX; lastMy2 = e.clientY;

  // Trail
  trail.unshift({ x: e.clientX, y: e.clientY });
  if (trail.length > MAX_TRAIL) trail.pop();

  // Spawn extra rings on fast movement (like EM burst)
  if (vel > 8) {
    const count = Math.min(Math.floor(vel / 8), 4);
    for (let i = 0; i < count; i++) rings.push(new RFRing(mx, my, true));
  }
});

function drawBuzz() {
  bctx.clearRect(0, 0, BW, BH);

  // Beacon pulse â€” steady rings emitted from cursor position
  pulseTimer++;
  if (pulseTimer >= PULSE_INTERVAL) {
    rings.push(new RFRing(mx, my, false));
    pulseTimer = 0;
  }

  // Draw sine-wave trail
  if (trail.length > 2) {
    bctx.save();
    bctx.beginPath();
    bctx.moveTo(trail[0].x, trail[0].y);
    for (let i = 1; i < trail.length - 1; i++) {
      const cx = (trail[i].x + trail[i + 1].x) / 2;
      const cy = (trail[i].y + trail[i + 1].y) / 2;
      bctx.quadraticCurveTo(trail[i].x, trail[i].y, cx, cy);
    }
    bctx.strokeStyle = '#60a5fa';
    bctx.lineWidth = 1.5;
    bctx.shadowColor = '#60a5fa';
    bctx.shadowBlur = 8;
    const grad = bctx.createLinearGradient(
      trail[0].x, trail[0].y,
      trail[trail.length - 1].x, trail[trail.length - 1].y
    );
    grad.addColorStop(0, 'rgba(96,165,250,0.55)');
    grad.addColorStop(1, 'rgba(96,165,250,0)');
    bctx.strokeStyle = grad;
    bctx.globalAlpha = 1;
    bctx.stroke();
    bctx.restore();
  }

  // Update & draw RF rings
  for (let i = rings.length - 1; i >= 0; i--) {
    rings[i].update();
    rings[i].draw(bctx);
    if (rings[i].dead) rings.splice(i, 1);
  }

  requestAnimationFrame(drawBuzz);
}
drawBuzz();



// â”€â”€ RF SPECTRUM ANALYZER (Mic + Simulated) â”€â”€
const specCanvas = document.getElementById('specCanvas');
const sctx = specCanvas.getContext('2d');

// â”€â”€ MIC SETUP â”€â”€
let micActive = false;
let analyserNode = null;
let micFFTData = null;
const micBtn = document.getElementById('micBtn');
const liveLabel = document.getElementById('liveLabel');

micBtn.addEventListener('click', async () => {
  if (!micActive) {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: false });
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const source = audioCtx.createMediaStreamSource(stream);
      analyserNode = audioCtx.createAnalyser();
      analyserNode.fftSize = 8192; // High resolution â€” gives 4096 bins, ~5.4 Hz per bin at 44100 Hz sample rate
      analyserNode.smoothingTimeConstant = 0.82;
      source.connect(analyserNode);
      micFFTData = new Uint8Array(analyserNode.frequencyBinCount); // 4096 bins
      micActive = true;
      micBtn.innerHTML = 'ðŸŽ™ MIC ON';
      micBtn.style.background = 'rgba(57,255,20,0.12)';
      micBtn.style.borderColor = 'rgba(57,255,20,0.5)';
      micBtn.style.color = 'var(--green)';
      liveLabel.textContent = 'Live Â· Mic';
      liveLabel.style.color = 'var(--green)';
      // Store actual sample rate for accurate Hz mapping
      window._micSampleRate = audioCtx.sampleRate;
    } catch(e) {
      micBtn.innerHTML = 'ðŸŽ™ DENIED';
      micBtn.style.color = 'var(--pink)';
      micBtn.style.borderColor = 'var(--pink)';
    }
  } else {
    micActive = false;
    analyserNode = null;
    micFFTData = null;
    micBtn.innerHTML = 'ðŸŽ™ MIC OFF';
    micBtn.style.background = 'rgba(0,220,255,0.08)';
    micBtn.style.borderColor = 'rgba(0,220,255,0.3)';
    micBtn.style.color = 'var(--cyan)';
    liveLabel.textContent = 'Simulated';
    liveLabel.style.color = '';
  }
});
const BAR_COUNT = 128;

// Noise floor level (0â€“1 scale, lower = lower on screen)
const NOISE_FLOOR = 0.08;

// RF signal carriers: { bin, strength, label, drift }
// Bins map to frequency labels on screen (0=700MHz ... 127=24GHz)
const carriers = [
  { bin: 8,  strength: 0.82, drift: 0.3, bw: 2  },  // 700 MHz LTE
  { bin: 22, strength: 0.91, drift: 0.2, bw: 3  },  // 1.8 GHz GSM
  { bin: 36, strength: 0.95, drift: 0.15, bw: 4 },  // 2.4 GHz WiFi carrier
  { bin: 40, strength: 0.55, drift: 0.4, bw: 2  },  // 2.4 GHz sideband
  { bin: 44, strength: 0.50, drift: 0.4, bw: 2  },  // 2.4 GHz sideband
  { bin: 78, strength: 0.88, drift: 0.2, bw: 5  },  // 5.8 GHz
  { bin: 120,strength: 0.75, drift: 0.5, bw: 3  },  // 24 GHz radar
];

// Per-bin state
const bins = Array.from({ length: BAR_COUNT }, (_, i) => ({
  val: NOISE_FLOOR + Math.random() * 0.04,
  peak: 0,
  peakTimer: 0,
  noisePhase: Math.random() * Math.PI * 2,
  noiseSpeed: 0.03 + Math.random() * 0.04,
}));

// Carrier phase oscillation (slight wobble like real AGC)
carriers.forEach(c => { c.phase = Math.random() * Math.PI * 2; });

// Interference burst event
let burstBin = -1, burstStrength = 0, burstTimer = 0;
let globalFrame = 0;

// Sweep line (like real SA sweep)
let sweepX = 0;

function resizeSpecCanvas() {
  const rect = specCanvas.parentElement.getBoundingClientRect();
  specCanvas.width = rect.width;
  specCanvas.height = rect.height;
}

function drawSpecAnalyzer() {
  resizeSpecCanvas();
  const W = specCanvas.width, H = specCanvas.height;
  globalFrame++;

  // Dark background
  sctx.fillStyle = 'rgba(4,13,26,0.92)';
  sctx.fillRect(0, 0, W, H);

  // â”€â”€ Grid â”€â”€
  sctx.strokeStyle = 'rgba(0,220,255,0.07)';
  sctx.lineWidth = 1;
  // Horizontal dB lines
  for (let g = 0; g <= 4; g++) {
    const y = H - (g / 4) * H;
    sctx.beginPath(); sctx.moveTo(0, y); sctx.lineTo(W, y); sctx.stroke();
  }
  // Vertical freq markers
  [8, 22, 36, 78, 120].forEach(b => {
    const x = (b / BAR_COUNT) * W;
    sctx.beginPath(); sctx.moveTo(x, 0); sctx.lineTo(x, H); sctx.stroke();
  });

  // â”€â”€ Random interference burst (simulated only) â”€â”€
  if (!micActive) {
    burstTimer--;
    if (burstTimer <= 0) {
      burstBin = Math.floor(Math.random() * BAR_COUNT);
      burstStrength = 0.4 + Math.random() * 0.45;
      burstTimer = 180 + Math.random() * 300;
    }
  }

  // â”€â”€ Compute target dBm for each bin â”€â”€
  const bw = W / BAR_COUNT;
  const targets = new Float32Array(BAR_COUNT);

  if (micActive && analyserNode && micFFTData) {
    // â”€â”€ MIC MODE: real FFT from microphone, 85â€“255 Hz only â”€â”€
    analyserNode.getByteFrequencyData(micFFTData);
    const sampleRate = window._micSampleRate || 44100;
    const nyquist = sampleRate / 2;
    const totalBins = micFFTData.length; // 4096 with fftSize=8192

    // Each bin covers: nyquist / totalBins Hz (e.g. 22050/4096 â‰ˆ 5.4 Hz/bin)
    const hzPerBin = nyquist / totalBins;
    const binLow  = Math.round(85  / hzPerBin);
    const binHigh = Math.round(255 / hzPerBin);
    const rangeLen = binHigh - binLow; // ~31 bins covering 85â€“255 Hz

    for (let i = 0; i < BAR_COUNT; i++) {
      const frac = i / (BAR_COUNT - 1);
      const micIdx = Math.min(Math.round(binLow + frac * rangeLen), totalBins - 1);
      let raw = micFFTData[micIdx] / 255;

      // Noise gate â€” kill very quiet bins so silence stays silent
      raw = raw < 0.08 ? 0 : raw;

      // Power curve â€” exaggerate differences (strong signals get boosted, weak stay low)
      raw = Math.pow(raw, 0.45);

      // Normalize to usable range
      targets[i] = NOISE_FLOOR + raw * 0.88 + Math.random() * 0.01;
    }
  } else {
    // â”€â”€ SIMULATED MODE â”€â”€
    for (let i = 0; i < BAR_COUNT; i++) {
      bins[i].noisePhase += bins[i].noiseSpeed;
      targets[i] = NOISE_FLOOR + Math.sin(bins[i].noisePhase) * 0.025 + Math.random() * 0.018;
    }

    // Carriers with gaussian skirt
    carriers.forEach(c => {
      c.phase += 0.012 + Math.random() * 0.004;
      const s = c.strength + Math.sin(c.phase) * c.drift * 0.06;
      for (let i = 0; i < BAR_COUNT; i++) {
        const dist = Math.abs(i - c.bin);
        if (dist <= c.bw * 4) {
          const gauss = Math.exp(-(dist * dist) / (2 * c.bw * c.bw));
          targets[i] = Math.max(targets[i], s * gauss);
        }
      }
    });

    // Interference burst
    if (burstStrength > 0.05) {
      burstStrength *= 0.985;
      for (let i = 0; i < BAR_COUNT; i++) {
        const dist = Math.abs(i - burstBin);
        if (dist < 6) {
          targets[i] = Math.max(targets[i], burstStrength * Math.exp(-(dist*dist)/8));
        }
      }
    }
  }

  // â”€â”€ Draw bars â”€â”€
  let peakBarIdx = 0, peakBarVal = 0;
  for (let i = 0; i < BAR_COUNT; i++) {
    bins[i].val += (targets[i] - bins[i].val) * 0.18;
    const bh = bins[i].val * H;
    const x = i * bw;

    if (bins[i].val > peakBarVal) { peakBarVal = bins[i].val; peakBarIdx = i; }

    const intensity = bins[i].val;
    const grad = sctx.createLinearGradient(0, H, 0, H - bh);
    grad.addColorStop(0,   intensity > 0.4 ? 'rgba(0,220,255,0.9)' : 'rgba(0,80,100,0.5)');
    grad.addColorStop(0.6, intensity > 0.4 ? 'rgba(0,180,255,0.6)' : 'rgba(0,60,80,0.3)');
    grad.addColorStop(1,   intensity > 0.7 ? 'rgba(255,255,255,0.9)' : 'rgba(0,220,255,0.2)');

    sctx.fillStyle = grad;
    sctx.shadowColor = intensity > 0.5 ? '#00dcff' : 'transparent';
    sctx.shadowBlur = intensity > 0.5 ? 10 : 0;
    sctx.fillRect(x + 0.5, H - bh, Math.max(bw - 1, 1), bh);

    // Per-bar peak hold line
    if (bh > bins[i].peak) { bins[i].peak = bh; bins[i].peakTimer = 0; }
    bins[i].peakTimer++;
    if (bins[i].peakTimer > 35) bins[i].peak -= 0.8;
    bins[i].peak = Math.max(bins[i].peak, bh);

    if (bins[i].peak > 3) {
      sctx.fillStyle = bins[i].peak / H > 0.6 ? '#ffffff' : '#00dcff';
      sctx.globalAlpha = 0.9;
      sctx.shadowColor = '#00dcff';
      sctx.shadowBlur = 6;
      sctx.fillRect(x + 0.5, H - bins[i].peak, Math.max(bw - 1, 1), 1.5);
      sctx.globalAlpha = 1;
    }
    sctx.shadowBlur = 0;
  }

  // â”€â”€ Dominant Peak Annotation â”€â”€
  if (peakBarVal > NOISE_FLOOR + 0.05) {
    const peakX = peakBarIdx * bw + bw / 2;
    const peakY = H - bins[peakBarIdx].peak;
    const frac = peakBarIdx / (BAR_COUNT - 1);
    const peakHz = Math.round(85 + frac * (255 - 85));
    const peakLabel = micActive ? `${peakHz} Hz` : `PEAK`;

    // Dashed vertical drop line
    sctx.save();
    sctx.setLineDash([3, 4]);
    sctx.strokeStyle = 'rgba(255,226,39,0.65)';
    sctx.lineWidth = 1;
    sctx.beginPath();
    sctx.moveTo(peakX, peakY + 6);
    sctx.lineTo(peakX, H);
    sctx.stroke();
    sctx.setLineDash([]);

    // Glowing dot at peak tip
    sctx.beginPath();
    sctx.arc(peakX, peakY, 4.5, 0, Math.PI * 2);
    sctx.fillStyle = '#ffe227';
    sctx.shadowColor = '#ffe227';
    sctx.shadowBlur = 18;
    sctx.fill();
    sctx.shadowBlur = 0;

    // Label pill
    const labelW = 62, labelH = 19;
    let labelX = peakX - labelW / 2;
    labelX = Math.max(2, Math.min(W - labelW - 2, labelX));
    const labelY = Math.max(4, peakY - 28);

    sctx.fillStyle = 'rgba(4,13,26,0.88)';
    sctx.strokeStyle = 'rgba(255,226,39,0.8)';
    sctx.lineWidth = 1;
    sctx.beginPath();
    sctx.roundRect(labelX, labelY, labelW, labelH, 3);
    sctx.fill();
    sctx.stroke();

    sctx.fillStyle = '#ffe227';
    sctx.font = 'bold 9px "IBM Plex Mono", monospace';
    sctx.textAlign = 'center';
    sctx.shadowColor = '#ffe227';
    sctx.shadowBlur = 8;
    sctx.fillText(peakLabel, labelX + labelW / 2, labelY + 13);
    sctx.shadowBlur = 0;
    sctx.textAlign = 'left';
    sctx.restore();
  }

  // â”€â”€ Sweep line â”€â”€
  sweepX = (sweepX + 1.2) % W;
  const sweepGrad = sctx.createLinearGradient(sweepX - 18, 0, sweepX, 0);
  sweepGrad.addColorStop(0, 'rgba(0,220,255,0)');
  sweepGrad.addColorStop(1, 'rgba(0,220,255,0.18)');
  sctx.fillStyle = sweepGrad;
  sctx.fillRect(sweepX - 18, 0, 18, H);
  sctx.strokeStyle = 'rgba(0,220,255,0.5)';
  sctx.lineWidth = 1;
  // Sweep line stroke
  sctx.beginPath();
  sctx.moveTo(sweepX, 0);
  sctx.lineTo(sweepX, H);
  sctx.stroke();

  requestAnimationFrame(drawSpecAnalyzer);
}
drawSpecAnalyzer();

</script>
</body>
</html>
